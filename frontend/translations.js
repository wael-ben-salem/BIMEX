// Système de traduction multilingue pour BIMEX
const translations = {
    fr: {
        // Page bim_analysis.html
        "title": "BIMEX - Interface d'Analyse Intelligente BIM",
        "upload_section": "Téléchargement de Fichiers",
        "upload_description": "Glissez-déposez vos fichiers BIM ou cliquez pour sélectionner",
        "supported_formats": "Formats supportés: IFC, XKT, GLTF, OBJ, STL",
        "analyze_button": "Analyser le Modèle",
        "results_section": "Résultats de l'Analyse",
        "loading": "Chargement en cours...",
        "error_message": "Une erreur s'est produite",
        "success_message": "Analyse terminée avec succès",
        
        // Page report_template.html
        "report_title": "BIMEX - Rapport d'Analyse BIM Avancée",
        "back_button": "Retour",
        "download_pdf": "Télécharger PDF",
        "print_report": "Imprimer le Rapport",
        "share_report": "Partager le Rapport",
        
        // Page home.html
        "home_title": "BIMEX - Mission Control Center",
        "welcome_message": "Bienvenue dans le Centre de Contrôle BIMEX",
        "dashboard": "Tableau de Bord",
        "projects": "Projets",
        "analytics": "Analyses",
        "settings": "Paramètres",
        
        // Page accueil.html
        "accueil_title": "BIMEX - Mission Control Center",
        "start_analysis": "Commencer l'Analyse",
        "view_projects": "Voir les Projets",
        "help_support": "Aide & Support",
        
        // Page de démonstration
        "title": "Démonstration du Système de Traduction BIMEX",
        "section1_title": "Fonctionnalités Principales",
        "section1_desc": "Le système de traduction BIMEX offre les fonctionnalités suivantes :",
        "feature1": "Traduction automatique en français, anglais et allemand",
        "feature2": "Interface utilisateur intuitive avec drapeaux",
        "feature3": "Sauvegarde de la langue sélectionnée",
        "feature4": "Traduction en temps réel sans rechargement",
        "section2_title": "Pages Compatibles",
        "section2_desc": "Le système a été intégré dans les pages suivantes :",
        "page1": "bim_analysis.html - Interface d'analyse BIM",
        "page2": "report_template.html - Modèle de rapport",
        "page3": "home.html - Page d'accueil BIM",
        "page4": "accueil.html - Page d'accueil principale",
        "section3_title": "Comment Utiliser",
        "section3_desc": "Pour utiliser le système de traduction :",
        "step1": "Cliquez sur le drapeau de la langue souhaitée",
        "step2": "L'interface se met à jour automatiquement",
        "step3": "Votre choix est sauvegardé pour les prochaines visites",
        "step4": "Profitez de votre expérience multilingue !"
    },
    
    en: {
        // Page bim_analysis.html
        "title": "BIMEX - Intelligent BIM Analysis Interface",
        "upload_section": "File Upload",
        "upload_description": "Drag and drop your BIM files or click to select",
        "supported_formats": "Supported formats: IFC, XKT, GLTF, OBJ, STL",
        "analyze_button": "Analyze Model",
        "results_section": "Analysis Results",
        "loading": "Loading...",
        "error_message": "An error occurred",
        "success_message": "Analysis completed successfully",
        
        // Page report_template.html
        "report_title": "BIMEX - Advanced BIM Analysis Report",
        "back_button": "Back",
        "download_pdf": "Download PDF",
        "print_report": "Print Report",
        "share_report": "Share Report",
        
        // Page home.html
        "home_title": "BIMEX - Mission Control Center",
        "welcome_message": "Welcome to BIMEX Mission Control Center",
        "dashboard": "Dashboard",
        "projects": "Projects",
        "analytics": "Analytics",
        "settings": "Settings",
        
        // Page accueil.html
        "accueil_title": "BIMEX - Mission Control Center",
        "start_analysis": "Start Analysis",
        "view_projects": "View Projects",
        "help_support": "Help & Support",
        
        // Page de démonstration
        "title": "BIMEX Translation System Demo",
        "section1_title": "Main Features",
        "section1_desc": "The BIMEX translation system offers the following features:",
        "feature1": "Automatic translation in French, English and German",
        "feature2": "Intuitive user interface with flags",
        "feature3": "Save selected language",
        "feature4": "Real-time translation without reloading",
        "section2_title": "Compatible Pages",
        "section2_desc": "The system has been integrated into the following pages:",
        "page1": "bim_analysis.html - BIM Analysis Interface",
        "page2": "report_template.html - Report Template",
        "page3": "home.html - BIM Home Page",
        "page4": "accueil.html - Main Home Page",
        "section3_title": "How to Use",
        "section3_desc": "To use the translation system:",
        "step1": "Click on the flag of the desired language",
        "step2": "The interface updates automatically",
        "step3": "Your choice is saved for future visits",
        "step4": "Enjoy your multilingual experience!"
    },
    
    de: {
        // Page bim_analysis.html
        "title": "BIMEX - Intelligente BIM-Analyseoberfläche",
        "upload_section": "Datei-Upload",
        "upload_description": "Ziehen Sie Ihre BIM-Dateien hierher oder klicken Sie zur Auswahl",
        "supported_formats": "Unterstützte Formate: IFC, XKT, GLTF, OBJ, STL",
        "analyze_button": "Modell analysieren",
        "results_section": "Analyseergebnisse",
        "loading": "Wird geladen...",
        "error_message": "Ein Fehler ist aufgetreten",
        "success_message": "Analyse erfolgreich abgeschlossen",
        
        // Page report_template.html
        "report_title": "BIMEX - Erweiterter BIM-Analysebericht",
        "back_button": "Zurück",
        "download_pdf": "PDF herunterladen",
        "print_report": "Bericht drucken",
        "share_report": "Bericht teilen",
        
        // Page home.html
        "home_title": "BIMEX - Missionskontrollzentrum",
        "welcome_message": "Willkommen im BIMEX Missionskontrollzentrum",
        "dashboard": "Dashboard",
        "projects": "Projekte",
        "analytics": "Analysen",
        "settings": "Einstellungen",
        
        // Page accueil.html
        "accueil_title": "BIMEX - Missionskontrollzentrum",
        "start_analysis": "Analyse starten",
        "view_projects": "Projekte anzeigen",
        "help_support": "Hilfe & Support",
        
        // Page de démonstration
        "title": "BIMEX Übersetzungssystem Demo",
        "section1_title": "Hauptfunktionen",
        "section1_desc": "Das BIMEX Übersetzungssystem bietet folgende Funktionen:",
        "feature1": "Automatische Übersetzung in Französisch, Englisch und Deutsch",
        "feature2": "Intuitive Benutzeroberfläche mit Flaggen",
        "feature3": "Ausgewählte Sprache speichern",
        "feature4": "Echtzeit-Übersetzung ohne Neuladen",
        "section2_title": "Kompatible Seiten",
        "section2_desc": "Das System wurde in die folgenden Seiten integriert:",
        "page1": "bim_analysis.html - BIM-Analyseoberfläche",
        "page2": "report_template.html - Berichtsvorlage",
        "page3": "home.html - BIM-Startseite",
        "page4": "accueil.html - Hauptstartseite",
        "section3_title": "Verwendung",
        "section3_desc": "So verwenden Sie das Übersetzungssystem:",
        "step1": "Klicken Sie auf die Flagge der gewünschten Sprache",
        "step2": "Die Benutzeroberfläche wird automatisch aktualisiert",
        "step3": "Ihre Wahl wird für zukünftige Besuche gespeichert",
        "step4": "Genießen Sie Ihre mehrsprachige Erfahrung!"
    }
};

// Fonction pour changer la langue
function changeLanguage(lang) {
    // Sauvegarder la langue sélectionnée
    localStorage.setItem('selectedLanguage', lang);
    
    // Mettre à jour l'interface
    updateInterface(lang);
    
    // Mettre à jour l'attribut lang de l'HTML
    document.documentElement.lang = lang;
    
    // Mettre à jour la classe active sur les boutons de langue
    updateLanguageButtons(lang);
}

// Fonction pour mettre à jour l'interface
function updateInterface(lang) {
    const currentLang = translations[lang];
    if (!currentLang) return;
    
    // Mettre à jour tous les éléments avec l'attribut data-translate
    const elements = document.querySelectorAll('[data-translate]');
    elements.forEach(element => {
        const key = element.getAttribute('data-translate');
        if (currentLang[key]) {
            element.textContent = currentLang[key];
        }
    });
    
    // Mettre à jour les titres de page
    const titleElements = document.querySelectorAll('title, h1, h2, h3, h4, h5, h6');
    titleElements.forEach(element => {
        const key = element.getAttribute('data-translate');
        if (key && currentLang[key]) {
            element.textContent = currentLang[key];
        }
    });
    
    // Mettre à jour les placeholders
    const inputElements = document.querySelectorAll('input[data-translate-placeholder], textarea[data-translate-placeholder]');
    inputElements.forEach(element => {
        const key = element.getAttribute('data-translate-placeholder');
        if (currentLang[key]) {
            element.placeholder = currentLang[key];
        }
    });
}

// Fonction pour mettre à jour les boutons de langue
function updateLanguageButtons(lang) {
    const langButtons = document.querySelectorAll('.lang-btn');
    langButtons.forEach(btn => {
        btn.classList.remove('active');
        if (btn.getAttribute('data-lang') === lang) {
            btn.classList.add('active');
        }
    });
}

// Fonction pour initialiser la langue
function initLanguage() {
    // Récupérer la langue sauvegardée ou utiliser le français par défaut
    const savedLang = localStorage.getItem('selectedLanguage') || 'fr';
    changeLanguage(savedLang);
}

// Initialiser la langue au chargement de la page
document.addEventListener('DOMContentLoaded', initLanguage);
